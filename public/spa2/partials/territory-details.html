<div id="territory-details-data" class="row m-t">
    <div class="col-lg-12">
        <h3>Territory <strong  class="badge big">{{ territory.number }}</strong></h3>
		<p>{{ territory.location }}</p>
		
		<div class="pull-right">
			<div class="col-md-12">
            	<a href="{{ territory.pdfLink }}" target="_blank" class="btn btn-success">Generate PDF</a>
			</div>
        </div>
		<div class="m-t m-b">
			<span ng-show="territory.publisher">Assigned to </span>
			<span class="label label-default normal-size" ng-hide="territory.publisher">Not assigned </span>
			<label class="label label-success normal-size" ng-show="territory.publisher">
				<a href="{{ territory.publisher.urlLink }}">
				<strong ng-bind="territory.publisher.firstName"></strong> 
				<strong ng-bind="territory.publisher.lastName"></strong>
				</a>
			</label>
		</div> 
		
		<div class="row" ng-show="isManager">
			<div class="checkbox">
			    <label>
					<input type="checkbox" class="js-switch" ng-model="updateChecked"> &nbsp; Change territory location
			    </label>
			</div>
		</div>

		<div class="row animate-show" ng-show="updateChecked">
			<hr />
			<div class="col-lg-9 col-md-8 col-sm-12">
                <label class="form-label col-md-4">Location</label>
				<div class="col-md-8">
                	<input data-ng-model="territory.location" type="text" placeholder="Location" class="form-control" />
				</div>
				<br />
            </div> 
            
            <div class="col-lg-3 col-md-4 col-sm-12">
                <button id="submitTerritory" class="btn btn-primary pull-right m-r" type="button" data-ng-disabled="!territory.location" data-ng-click="updateTerritory()">Save <i class="fa fa-check-circle"></i></button>
            </div>
        </div>

		<hr />
		
		<div class="row" ng-show="isEditor">
			<div class="checkbox">
			    <label>
					<input type="checkbox" class="js-switch" ng-model="addChecked"> &nbsp; Add a new address
			    </label>
			</div>
		</div>
	
		<div ng-show="addChecked">
           	<div class="row">
	            <div class="col-xs-12 m-b">
	               	<label class="form-label col-md-12"><h4>Add a new address</h4></label>
					<div class="col-md-12">
						<p>Please enter house number in abbreviated format i.e. (201, APT 305)<br>
							Select street or add new street, if not available. <br>
							For apartment buildings, please select "Apartment".
							Do not select "Apartment" for duplex or alphabetical letters (A, B, C...), instead enter "Door". 
						</p>
					</div>
					
	            </div>
           	</div> 
           	<div class="row">    
	            <div class="col-md-4 col-sm-6 col-xs-12">
	               <label class="form-label col-md-4"> Name </label>
					<div class="col-md-8">
	 			    	<input data-ng-model="newAddress.name" type="text" placeholder="Name" class="form-control" />	 
	            	</div>
					<br>
				</div>
	            <div class="col-md-4 col-sm-6 col-xs-12">
	                <label class="form-label col-md-4"> Address </label>
					<div class="col-md-8">
	 			    	<input data-ng-model="newAddress.address" type="number" placeholder="Address" class="form-control" />	 
	            	</div>
					<br>
				</div>
	            
				<div class="col-md-4 col-sm-6 col-xs-12">
	                <label class="form-label col-md-4"> Duplex (Door) </label>
					<div class="col-lg-8">
	 			    	<input data-ng-model="newAddress.apt" type="text" placeholder="Apt (Door)" class="form-control" />	 
	            	</div>
	            	<span class="help-block m-l">For duplex or alphabetical letters (A, B, C...)</span>
					<br>
				</div> 
			</div>
			<br /> 
			 
          	<div class="row">	
	          	<div class="col-md-4 col-sm-6 col-xs-12">
					<label class="form-label col-md-4"> Apartment </label>
					<div class="col-md-8">
					    <label>
							<input type="checkbox" class="js-switch yn" ng-model="newAddress.isApt" ng-class="{active: newAddress.isApt == 1}"> 
					    </label>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 col-xs-12 is-street" ng-hide="newAddress.isApt"> 	
	                <label class="form-label col-md-4"> Street </label>
					<div class="col-md-8">
	 			    	<select name="street" ng-model="newAddress.street" placeholder="Street" class="form-control">    
							<option value="">Select Street</option>
		                    <option ng-repeat="n in territory.streets" value="{{n}}">{{n}}</option>
		                    <option value="new-street">Add new street</option>
						</select>	 
					</div>
				</div>
				<div class="col-md-4 col-sm-6 col-xs-12 is-street new-street" ng-show="newAddress.street=='new-street' && newAddress.isApt != 1"> 	
	                <label class="form-label col-md-4">Add street</label>
					<div class="col-md-8">
	 			    	<input ng-model="newAddress.newStreet" type="text" placeholder="New street" class="form-control" />
	            	</div>
				</div>
				<div class="col-md-4 col-sm-6 col-xs-12 is-apt" ng-show="newAddress.isApt"> 	
	                <label class="form-label col-md-4"> Building </label>
					<div class="col-md-8">
	 			    	<select name="building" ng-model="newAddress.building" placeholder="Building" class="form-control">    
							<option value="">Select Apt Building</option>
		                    <option ng-repeat="n in territory.buildings" value="{{n}}">{{n}}</option>
		                    <option value="new-building">Add new building</option>
						</select>	 
					</div>
				</div>
				<div class="col-md-4 col-sm-6 col-xs-12 is-apt new-building" ng-show="newAddress.building=='new-building' && newAddress.isApt"> 	
	                <label class="form-label col-md-4">Add building</label>
					<div class="col-md-8">
	 			    	<input ng-model="newAddress.newBuilding" type="text" placeholder="New building" class="form-control" />
	            	</div>
				</div>
          	</div>
			<br /> 
          	<div class="row">  
	          	<div class="col-md-4 col-sm-6 col-xs-12">
	                <label class="form-label col-md-4"> Phone </label>
					<div class="col-md-8">
	 			    	<input data-ng-model="newAddress.phone" type="text" placeholder="Phone" class="form-control maskPhone" />	 
	            	</div>
				</div>
	            <div class="col-md-4 col-sm-6 col-xs-12">
	                <label class="form-label col-md-4"> Notes </label>
					<div class="col-md-8">
	 			    	<input data-ng-model="newAddress.notes" type="text" placeholder="Notes" class="form-control" />	 
	           		</div>
					<br>
				</div>
	            <div class="col-md-4 col-sm-6 col-xs-12">
	                <label class="form-label col-md-4"> Date </label>
					<div class="col-md-8">
	                	<input data-ng-model="newAddress.date" type="date" placeholder="yyyy-mm-dd" required  class="form-control date" />
	            	</div>
				</div>
	            <div class="col-md-4 col-sm-6 col-xs-12" style="display: none">
	                <label class="form-label col-md-4"> Position (Order)</label>
					<div class="col-md-8">
		 			    <select name="position" data-ng-model="newAddress.position" placeholder="Position #" class="form-control">    
							<option value="">Select Position</option>
		                    <option ng-repeat="n in territory.addresses" value="{{$index}}">{{$index+1}}</option>
		                    <option value="{{territory.addresses.length}}">{{territory.addresses.length+1}}</option>
						</select>	 
					</div>
					<br>	
	            </div> 
			</div> 
			<br /> 
	        <div class="row">        
	            <div class="col-xs-12">
	                <button id="submitTerritory" class="btn btn-success pull-right m-r" type="button"
	                    data-ng-disabled="!newAddress.address || !(newAddress.street || newAddress.building)"
	                    data-ng-click="addAddress()">Save <i class="fa fa-check-circle"></i></button>
	            </div>
          	</div>  
        </div>

        <hr />
		
		<div class="row">
			<div class="col-lg-12">
				<div class="panel panel-default">
					<div class="panel-heading">
                        Territory Addresses
                    </div>

					<div class="panel-body">
						<div class="dataTable_wrapper">
							<table class="table table-striped table-bordered table-hover dt-responsive nowrap" cellspacing="0" width="100%" id="dataTables-addresses">
								<thead>
									<tr>
										<th>Name</th>
										<th class="min-mobile-l">Address </th>
										<th class="never">Order</th>
										<th>Phone</th>
										<th>Notes</th>
										<th class="min-mobile-l">Action </th>
									</tr>
								</thead>
								<tbody></tbody>
							</table>
						</div>
					</div>
					
				</div>
			</div>
		</div>

		<hr />
  
		<div class="modal fade" id="unassignTerr">
			<div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
			        <h4 class="modal-title">Unassign This Territory</h4>
			      </div>
			      <div class="modal-body">
			        <p>Are you sure you want to unassign this territory?</p>
					<div id="terr-number"></div>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Nevermind</button>
			        <button type="button" class="btn btn-primary btn-danger" data-ng-click="unassignTerritoryConfirm(confirmUnassign.terrSelected)">Yes, proceed</button>
			      </div>
			    </div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		
		<a id="targetEditAddress" data-toggle="modal" data-target="#editAddress" data-backdrop="static"></a>
		<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" id="editAddress">
			<div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h4 class="modal-title">Edit This Address</h4>
			      </div>
			      <div class="modal-body">
			         <div class="row">    
			            <div class="form-group col-xs-12">
			               <label class="form-label col-md-4"> Name </label>
							<div class="col-md-8">
			 			    	<input ng-model="editTerritoryAddress.name" type="text" placeholder="Name" class="form-control" />	 
			            	</div>
						</div>
					</div>
					<div class="row"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Address </label>
							<div class="col-md-8">
			 			    	<input ng-model="editTerritoryAddress.address" type="number" placeholder="Address" class="form-control" />	 
			            	</div>
						</div>
					</div>
					<div class="row is-street is-duplex"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Duplex (Door) </label>
							<div class="col-md-8">
			 			    	<input ng-model="editTerritoryAddress.apt" type="text" placeholder="Duplex (Door)" class="form-control" />	 
			            	</div>
						</div>
					</div>
					<div class="row is-street"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Street </label>
							<div class="col-md-8">
			 			    	<select name="street" ng-model="editTerritoryAddress.street" placeholder="Street" class="form-control">    
									<option value="">Select Street</option>
				                    <option ng-repeat="n in territory.streets" value="{{n}}">{{n}}</option>
								</select>	 
			            	</div>
						</div>
					</div>
					<div class="row is-apt"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Building </label>
							<div class="col-md-8">
			 			    	<select name="building" ng-model="editTerritoryAddress.building" placeholder="Building" class="form-control">    
									<option value="">Select Apt Building</option>
				                    <option ng-repeat="n in territory.buildings" value="{{n}}">{{n}}</option>
								</select>	 
			            	</div>
						</div>
					</div> 
					<div class="row"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Phone </label>
							<div class="col-md-8">
			 			    	<input ng-model="editTerritoryAddress.phone" type="text" placeholder="Phone" class="form-control maskPhone" />	 
			            	</div>
						</div>
		          	</div>
					<div class="row" ng-show="isAdmin"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Inactive </label>
							<div class="col-md-8">
			 			    	<select name="position" ng-model="editTerritoryAddress.inactive" placeholder="Inactive" class="form-control">    
									<option value="1">Yes</option> 
									<option value="0">No</option> 
								</select>	
			            	</div>
						</div>
		          	</div>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Nevermind</button>
			        <button type="button" class="btn btn-primary btn-info" id="btnUpdateAddress" 
						data-ng-click="updateAddress()">Save <i class="fa fa-check-circle"></i></button>
			 		<input ng-model="editTerritoryAddress.isApt" type="hidden" />	 
			      </div>
			    </div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		
		
		<a id="targetEditNote" data-toggle="modal" data-target="#editNote"></a>
		<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" id="editNote">
			<div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h4 class="modal-title">Edit This Note</h4>
			      </div>
			      <div class="modal-body">
			         <div class="row">    
			            <div class="form-group col-xs-12">
			               <label class="form-label col-md-4"> Note </label>
							<div class="col-md-8">
			 			    	<input ng-model="editNote.note" type="text" placeholder="Note" class="form-control" />	 
			            	</div>
						</div>
					</div>
					<div class="row"> 	
			            <div class="form-group col-xs-12">
			                <label class="form-label col-md-4"> Date </label>
							<div class="col-md-8">
			 			    	<input ng-model="editNote.date" type="date" placeholder="yyyy-mm-dd" class="form-control" />	 
			            	</div>
						</div>
					</div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Nevermind</button>
			        <button type="button" class="btn btn-primary btn-info" id="btnSaveNote" 
						data-ng-click="saveNote()">Save <i class="fa fa-check-circle"></i></button>
			      </div>
			    </div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		
		 

    </div>
</div>
